<!doctype html>
<html>
<link rel="stylesheet" type="text/css" href="./stylesheets/blackJack.css">
<body>
    <div id="board">
        <div id="my_poker" ></div>
    </div>

    <script type="text/javascript">
        'use strict'
        !function(){
            var Poker = (function(){
                var turn_poker = 1,
                    board = document.getElementById('board'),
                    my_poker = document.getElementById('my_poker'),
                    idx = 0,
                    point = 1

                var Poker = function () {
                    var This = this
                    my_poker.addEventListener('click', function () { This.action() }, false)
                }
                Poker.prototype.createNode = function () {
                    this.node = document.createElement('div'),
                    this.node2 = document.createElement('div')
                    this.node.setAttribute('class', 'poker')

                    board.appendChild(this.node)

                    this.node2.setAttribute('class', 'back')
                    this.node.appendChild(this.node2)
                }
                Poker.prototype.action = function () {
                    var This = this
                    if( turn_poker && idx < 5 ){
                        turn_poker = 0
                        this.createNode()

                        point = Math.floor((Math.random()*13)+1)
                        idx++
                        setTimeout(function(){
                            This.node.className += ' trans_1s move'
                            setTimeout(function(){
                                This.node2.className += ' turn trans_1s suits-' + point
                                setTimeout(function(){
                                    This.node2.className += ' spades turn_back'
                                    turn_poker = 1
                                }, 1000)
                            }, 500)
                        }, 300)
                    }
                }
                return Poker
            })()
            var Poker1 = new Poker()
        }()
    </script>
</body>
</html>