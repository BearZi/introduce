<!doctype html>
<html>
<link rel="stylesheet" type="text/css" href="./stylesheets/blackJack.css">
<body>
    <div id="board">
        <div id="my_poker" ></div>
    </div>

    <script type="text/javascript">
        'use strict'
        !function(){
            var Poker = (function(){
                var turn_poker = 1,
                    board = document.getElementById('board'),
                    my_poker = document.getElementById('my_poker'),
                    idx = 0,
                    point = 1,
                    createNode= function (This) {
                        This.node = document.createElement('div'),
                        This.node2 = document.createElement('div')
                        This.node.setAttribute('class', 'poker')

                        board.appendChild(This.node)

                        This.node2.setAttribute('class', 'back')
                        This.node.appendChild(This.node2)
                    },
                    action = function (This) {
                        if( turn_poker && idx < 5 ){
                            turn_poker = 0
                            createNode(This)

                            point = Math.floor((Math.random()*13)+1)
                            idx++

                            setTimeout(function(){
                                This.node.className += ' trans_1s move'
                                setTimeout(function(){
                                    This.node2.className += ' turn trans_1s suits-' + point
                                    setTimeout(function(){
                                        This.node2.className += ' spades turn_back'
                                        turn_poker = 1
                                    }, 1000)
                                }, 500)
                            }, 300)
                        }
                    },
                    timeoutFnc = function (fnc, time) {
                        setTimeout(fnc, time)
                    }



                var Poker = function () {
                    var This = this
                    my_poker.addEventListener('click', function () { action(This) }, false)
                }
                return Poker
            })()
            var Poker1 = new Poker()
        }()
    </script>
</body>
</html>